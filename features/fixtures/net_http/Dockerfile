ARG GO_VERSION
FROM golang:${GO_VERSION}-alpine

RUN apk update && \
    apk upgrade && \
    apk add git

ENV GOPATH /app
ENV GO111MODULE auto

COPY testbuild /app/src/github.com/bugsnag/bugsnag-go
WORKDIR /app/src/github.com/bugsnag/bugsnag-go

RUN go get -v -d . ./sessions ./headers ./errors

# Copy test scenarios
COPY ./net_http /app/src/test
WORKDIR /app/src/test
